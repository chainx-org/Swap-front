(this["webpackJsonpx-bridge-v2"]=this["webpackJsonpx-bridge-v2"]||[]).push([[7],{766:function(n,e,t){"use strict";t.d(e,"a",(function(){return d}));var i=t(22),c=t.n(i),r=t(32),a=t(1),s=t(249),o=t(0);function d(n){var e=Object(o.useState)(null),t=Object(a.a)(e,2),i=t[0],d=t[1],l=Object(s.b)(),u=l.api,b=l.isApiReady;return Object(o.useEffect)((function(){b&&function(){var e=Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,u.query.system.account(n);case 3:t=e.sent,d(t),e.next=8;break;case 7:return e.abrupt("return");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[n,b]),Object(o.useEffect)((function(){if(b){var e=u.rpc.chain.subscribeFinalizedHeads(function(){var e=Object(r.a)(c.a.mark((function e(t){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,u.query.system.account(n);case 3:i=e.sent,d(i),e.next=8;break;case 7:return e.abrupt("return");case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());return function(){Object(r.a)(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e;case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()}}return function(){}}),[n,b]),i}},767:function(n,e,t){"use strict";e.a=function(n){return"number"===typeof n?(n/1e8).toFixed(5).toString():n?(n.toNumber()/1e8).toFixed(5).toString():"-"}},774:function(n,e,t){"use strict";t.d(e,"d",(function(){return l})),t.d(e,"b",(function(){return u})),t.d(e,"e",(function(){return b})),t.d(e,"a",(function(){return x})),t.d(e,"c",(function(){return p}));var i,c,r,a,s,o=t(58),d=t(59),l=d.a.div(i||(i=Object(o.a)(["\n  margin-top: 20px;\n"]))),u=d.a.div(c||(c=Object(o.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 40px;\n\n  .ant-input-number {\n    width: 200px;\n    height: 44px;\n    font-size: 32px;\n    color: #8E8E8E;\n    line-height: 44px;\n  }\n\n  .btc-title {\n    font-size: 32px;\n    color: #282828;\n    font-weight: bold;\n    margin-left: 16px;\n  }\n\n  img {\n    width: 32px;\n    height: 32px;\n    margin-right: 16px;\n  }\n"]))),b=d.a.div(r||(r=Object(o.a)(["\n  margin-top: 20px;\n  display: flex;\n  justify-content: center;\n  font-size: 14px;\n  color: #282828;\n  font-weight: bold;\n"]))),x=d.a.div(a||(a=Object(o.a)(["\n  margin-top:16px;\n  .btc-address-info{\n    display: flex;\n    justify-content: space-between;\n    .btc-address-title{\n      font-size: 12px;\n      color: #282828;\n      font-weight: bold;\n    }\n    .btc-fee{\n      font-size: 12px;\n      color: #282828;\n    }\n  }\n  .ant-input {\n    width: 419px;\n    height: 44px;\n    font-size: 14px;\n    color: #8E8E8E;\n    line-height: 44px;\n    margin-top: 8px;\n  }\n"]))),p=d.a.footer(s||(s=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  .redeem-footer-title {\n    font-size: 12px;\n    color: #282828;\n  }\n\n  .redeem-footer-num {\n    font-size: 24px;\n    color: #282828;\n    margin-top: 8px;\n  }\n\n  button {\n    width: 419px;\n    height: 44px;\n    margin-top: 20px;\n  }\n"])))},891:function(n,e,t){"use strict";t.r(e);var i,c,r,a,s,o,d,l,u,b,x,p,j,f,m,h,g,O,v,y,w,k,E,F=t(22),N=t.n(F),C=t(32),S=t(1),B=t(0),z=t(58),A=t(59),T=A.a.div(i||(i=Object(z.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),I=A.a.div(c||(c=Object(z.a)(["\n  width: 499px;\n  height: 524px;\n  border-radius: 10px;\n  background: #fff;\n  margin: 24px;\n  border: 1px solid #EFEFEF;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),R=A.a.div(r||(r=Object(z.a)(["\n  font-size: 16px;\n  font-weight: bold;\n  color: #8E8E8E;\n  ul{\n    width: 425px;\n    height: 48px;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    background: #F6F6F6;\n    margin-top: 30px;\n    border-radius: 6px;\n  }\n  li{\n    width: 208px;\n    height: 44px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-radius: 6px;\n    &.active{\n      background: #fff;\n      color: #282828;\n    }\n  };\n"]))),M=A.a.div(a||(a=Object(z.a)(["\n  button{\n    border-radius: 0;\n    height: 40px;\n  }\n  position: absolute;\n  .ant-modal-body{\n    display: flex;\n    flex-direction: column;\n    padding: 0;\n  }\n"]))),q=A.a.div(s||(s=Object(z.a)(["\n  margin-top: 24px;\n  margin-left: 24px;\n  margin-right: 24px;\n  img{\n    width: 16px;\n    height: 16px;\n    margin-left:8px;\n    margin-right: 6px;\n  }\n  display: flex;\n  width: 470px;\n  height: 28px;\n  background: #FFEBE3;\n  border-radius: 6px;\n  align-items: center;\n"]))),J=A.a.div(o||(o=Object(z.a)(["\n  display: flex;\n  flex-direction: column;\n align-items: center;\n  margin-top: 24px;\n  .info-title{\n    font-size: 12px;\n    color: #282828;\n  }\n  .transfer-amount{\n    margin-top: 4px;\n    font-size: 24px;\n    color: #282828;\n    font-weight: bold;\n  }\n  .transfer-tip{\n    img{\n      margin-right: 4px;\n    }\n    display: flex;\n  }\n"]))),X=A.a.div(d||(d=Object(z.a)(["\n  margin-right: 24px;\n  margin-left: 24px;\n  display: flex;\n  flex-direction: column;\n  margin-top: 24px;\n  .title{\n    font-size: 12px;\n    color: #282828;\n    font-weight: bold;\n  }\n  .address{\n    margin-top: 8px;\n    height: 40px;\n    background: #EFEFEF;\n    border-radius: 4px;\n    padding: 16px 12px;\n    display: flex;\n    align-items: center;\n  }\n"]))),P=A.a.div(l||(l=Object(z.a)(["\n  margin-right: 24px;\n  margin-left: 24px;\n  display: flex;\n  flex-direction: column;\n  margin-top: 24px;\n  .title{\n    font-size: 12px;\n    color: #282828;\n    font-weight: bold;\n  }\n  .address{\n    margin-top: 8px;\n    height: 56px;\n    background: #EFEFEF;\n    border-radius: 4px;\n    padding: 16px 12px;\n    display: flex;\n    align-items: center;\n    word-break:break-all;\n  }\n"]))),V=A.a.div(u||(u=Object(z.a)(["\n  background: #F6F6F6;\n  margin-top: 30px;\n  padding: 24px;\n li{\n   display: flex;\n   justify-content: space-between;\n   margin-bottom: 12px;\n   .title{\n     font-size: 12px;\n     color: #8E8E8E;\n   }\n   .content{\n     font-size: 12px;\n     color: #282828;\n   }\n }\n"]))),U=A.a.div(b||(b=Object(z.a)(["\n  position: absolute;\n  .ant-modal-body{\n    display: flex;\n    flex-direction: column;\n    padding: 0;\n  }\n"]))),D=A.a.div(x||(x=Object(z.a)(["\n  padding: 4px;\n  margin-top: 24px;\n  margin-left: 24px;\n  margin-right: 24px;\n  img{\n    width: 16px;\n    height: 16px;\n    margin-left:8px;\n    margin-right: 6px;\n    margin-top: 4px;\n  }\n  display: flex;\n  width: 470px;\n  height: 100%;\n  background: #FFEBE3;\n  border-radius: 6px;\n"]))),G=A.a.div(p||(p=Object(z.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 24px;\n  .title{\n    font-size: 14px;\n    color: #282828;\n  }\n  .time{\n    font-size: 32px;\n    color: #EA754B;\n    font-weight: bold;\n  }\n"]))),H=A.a.div(j||(j=Object(z.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 24px;\n button{\n   width: 340px;\n   height: 44px;\n }\n  .force-redeem{\n    font-size: 14px;\n    color: #EA754B;\n    margin-top: 16px;\n  }\n"]))),Y=A.a.div(f||(f=Object(z.a)(["\n  background: #F6F6F6;\n  margin-top: 30px;\n  padding: 24px;\n  li{\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 12px;\n    .title{\n      font-size: 12px;\n      color: #8E8E8E;\n    }\n    .content{\n      font-size: 12px;\n      color: #282828;\n    }\n  }\n"]))),L=A.a.div(m||(m=Object(z.a)(["\n  margin-top: 20px;\n"]))),W=A.a.div(h||(h=Object(z.a)(["\n  background: #F6F6F6;\n  border-radius: 6px;\n  width: 419px;\n  height: 70px;\n  padding: 16px;\n  font-size: 12px;\n  color: #282828;\n\n  .current-account {\n    margin-top: 4px;\n    font-size: 12px;\n    color: #8E8E8E;\n  }\n"]))),K=A.a.div(g||(g=Object(z.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 40px;\n\n  .ant-input-number {\n    width: 200px;\n    height: 44px;\n    font-size: 32px;\n    color: #8E8E8E;\n    line-height: 44px;\n  }\n\n  .btc-title {\n    font-size: 32px;\n    color: #282828;\n    font-weight: bold;\n    margin-left: 16px;\n  }\n\n  img {\n    width: 32px;\n    height: 32px;\n    margin-right: 16px;\n  }\n"]))),Q=A.a.div(O||(O=Object(z.a)(["\n  color: #282828;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 24px;\n\n  .locking-title {\n    font-size: 14px;\n  }\n\n  .locking-num {\n    margin-left: 8px;\n    font-size: 14px;\n  }\n\n  .locking-tip {\n    margin-left: 8px;\n    padding: 0 4px;\n    height: 20px;\n    background: #FDF5E0;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #9B7E2E;\n    line-height: 20px;\n    text-align: center;\n  }\n"]))),_=A.a.footer(v||(v=Object(z.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  .issue-footer-title {\n    font-size: 12px;\n    color: #282828;\n  }\n\n  .issue-footer-num {\n    font-size: 24px;\n    color: #282828;\n    margin-top: 8px;\n  }\n\n  button {\n    width: 419px;\n    height: 44px;\n    margin-top: 20px;\n  }\n"]))),Z=A.a.div(y||(y=Object(z.a)(["\n  position: absolute;\n  display: flex;\n  .ant-modal-body{\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n"]))),$=A.a.div(w||(w=Object(z.a)(["\n  margin-top: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  .issue-footer-title {\n    font-size: 12px;\n    color: #282828;\n  }\n\n  .issue-footer-num {\n    font-size: 24px;\n    color: #282828;\n    margin-top: 8px;\n  }\n\n"]))),nn=A.a.div(k||(k=Object(z.a)(["\n  margin-top: 10px;\n  background: #F6F6F6;\n  border-radius: 6px;\n  width: 419px;\n  height: 70px;\n  padding: 16px;\n  font-size: 12px;\n  color: #282828;\n\n  .current-account {\n    margin-top: 4px;\n    font-size: 12px;\n    color: #8E8E8E;\n  }\n"]))),en=A.a.div(E||(E=Object(z.a)(["\nmargin-top: 20px;\ndisplay: flex;\njustify-content: center;\nfont-size: 14px;\ncolor: #282828;\nfont-weight: bold;\n\n"]))),tn=t.p+"static/media/btc.2bbb551b.svg",cn=t(511),rn=t(893),an=t(887),sn=t(223),on=t(760),dn=t(762),ln=t(166),un=t(249),bn=t(394),xn=t(736),pn=t(377),jn=t(393),fn=t(221),mn=t(766),hn=t(767),gn=t(14);var On=function(){var n=Object(B.useContext)(bn.a).pcxPrice,e=Object(ln.a)().currentAccount,t=Object(dn.a)().t,i=Object(B.useState)(!1),c=Object(S.a)(i,2),r=c[0],a=c[1],s=Object(B.useState)(null),o=Object(S.a)(s,2),d=(o[0],o[1],Object(B.useState)(0)),l=Object(S.a)(d,2),u=l[0],b=l[1],x=Object(B.useState)(""),p=Object(S.a)(x,2),j=p[0],f=p[1],m=Object(B.useState)(""),h=Object(S.a)(m,2),g=h[0],O=h[1],v=Object(B.useState)(!1),y=Object(S.a)(v,2),w=y[0],k=y[1],E=Object(B.useState)(),F=Object(S.a)(E,2),z=(F[0],F[1],Object(B.useState)([])),A=Object(S.a)(z,2),T=(A[0],A[1],Object(B.useState)()),I=Object(S.a)(T,2),R=(I[0],I[1],Object(un.b)()),M=R.api,q=(R.isApiReady,Object(mn.a)(null===e||void 0===e?void 0:e.address));function J(){return(J=Object(C.a)(N.a.mark((function n(){var t;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(fn.web3FromAddress)(e.address);case 2:t=n.sent,M.tx.xGatewayBitcoinV2.requestIssue(j,1e8*u).signAndSend(e.address,{signer:t.signer},(function(n){var e=n.status,t=n.dispatchError;n.events;if(e.isInBlock)cn.a.success({message:"Completed at block hash ".concat(e.asInBlock.toString()),duration:0});else if(t){if(t.isModule){var i=M.registry.findMetaError(t.asModule),c=i.documentation,r=i.name,s=i.section;cn.a.error({message:"".concat(s,".").concat(r,": ").concat(c.join(" ")),duration:0})}}else cn.a.success({message:"Current status: ".concat(e.type),duration:0}),"Finalized"===e.type&&a(!1)})).catch((function(n){cn.a.error({message:":( transaction failed', ".concat(n),duration:0})}));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var X=function(){var e=Object(C.a)(N.a.mark((function e(){var t,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u<=0)){e.next=3;break}return cn.a.warn({message:"\u53d1\u884c\u7684\u503c\u5fc5\u987b\u5927\u4e8e0"}),e.abrupt("return");case 3:return e.next=5,M.query.xGatewayBitcoinV2.vaults.entries();case 5:return t=e.sent,e.next=8,Promise.all(t.map(function(){var e=Object(C.a)(N.a.mark((function e(t){var i,c,r,a,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(S.a)(t,2),i[0],c=i[1],r=c.unwrap(),e.next=4,M.query.system.account(r.id);case 4:return e.next=6,e.sent.data.reserved;case 6:return a=e.sent,s=a.muln(n).divn(3),e.abrupt("return",[r.id,s.sub(r.issuedTokens).sub(r.toBeIssuedTokens),r.wallet]);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 8:i=e.sent,f(i?Object(jn.b)(JSON.parse(JSON.stringify(i))[0][0]):""),O(i?JSON.parse(JSON.stringify(i))[0][2]:""),a(!0),k(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(gn.jsxs)(L,{children:[Object(gn.jsxs)(W,{children:[Object(gn.jsx)("div",{children:t("Current Account")}),Object(gn.jsx)("div",{className:"current-account",children:null===e||void 0===e?void 0:e.address})]}),Object(gn.jsxs)(K,{children:[Object(gn.jsx)("img",{src:tn,alt:""}),Object(gn.jsx)(rn.a,{value:u,onChange:function(n){b(n||0)}}),Object(gn.jsx)("div",{className:"btc-title",children:"BTC"})]}),Object(gn.jsxs)(en,{children:["PCX ",t("balance")," ",Object(hn.a)(null===q||void 0===q?void 0:q.data.free)]}),Object(gn.jsxs)(Q,{children:[Object(gn.jsx)("div",{className:"locking-title",children:t("Locking collateral")}),Object(gn.jsxs)("div",{className:"locking-num",children:[u/n/10||0," PCX"]}),Object(gn.jsx)("div",{className:"locking-tip",children:t("Unlock after completion")})]}),Object(gn.jsx)(an.a,{}),Object(gn.jsxs)(_,{children:[Object(gn.jsx)("div",{className:"issue-footer-title",children:t("You will receive")}),Object(gn.jsxs)("div",{className:"issue-footer-num",children:[u," XBTC"]}),Object(gn.jsx)(sn.a,{loading:w,onClick:X,children:t("next")})]}),Object(gn.jsx)(Z,{children:Object(gn.jsxs)(on.a,{title:t("Confirmation of issuance"),getContainer:!1,visible:r,onCancel:function(){return a(!1)},footer:[Object(gn.jsx)(sn.a,{onClick:function(){return J.apply(this,arguments)},children:t("next")},"back")],children:[Object(gn.jsxs)(W,{children:[Object(gn.jsx)("div",{children:t("Current Account")}),Object(gn.jsx)("div",{className:"current-account",children:null===e||void 0===e?void 0:e.address})]}),Object(gn.jsxs)(Q,{children:[Object(gn.jsx)("div",{className:"locking-title",children:t("Locking collateral")}),Object(gn.jsxs)("div",{className:"locking-num",children:[u/n/10||0," PCX"]}),Object(gn.jsx)("div",{className:"locking-tip",children:t("Unlock after completion")})]}),Object(gn.jsxs)($,{children:[Object(gn.jsx)("div",{className:"issue-footer-title",children:t("You will receive")}),Object(gn.jsxs)("div",{className:"issue-footer-num",children:[u," XBTC"]})]}),Object(gn.jsxs)(nn,{children:[Object(gn.jsx)("div",{children:t("Vault")}),Object(gn.jsx)("div",{className:"current-account",children:j?Object(xn.a)(Object(pn.a)(j),44):""})]}),Object(gn.jsxs)(nn,{children:[Object(gn.jsx)("div",{children:t("BTC address of Vault")}),Object(gn.jsx)("div",{className:"current-account",children:g})]})]})})]})},vn=t(774),yn=t(894);var wn=function(n,e){var t=Object(un.b)().api,i=Object(B.useState)(0),c=Object(S.a)(i,2),r=c[0],a=c[1];return Object(B.useEffect)((function(){function e(){return(e=Object(C.a)(N.a.mark((function n(e){var i;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.query.xAssets.assetBalance(e,1);case 2:i=n.sent,a(JSON.parse(JSON.stringify(i)).Usable/1e8);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(n){e.apply(this,arguments)}(n)}),[n,e]),{XbtcBalance:r,setXbtcBalance:a}},kn=t(797);var En,Fn,Nn,Cn=function(){var n=Object(ln.a)().currentAccount,e=Object(dn.a)().t,t=Object(B.useState)(0),i=Object(S.a)(t,2),c=i[0],r=i[1],a=Object(B.useState)(""),s=Object(S.a)(a,2),o=s[0],d=s[1],l=Object(B.useState)(0),u=Object(S.a)(l,2),b=u[0],x=u[1],p=Object(un.b)(),j=p.api,f=(p.isApiReady,wn(null===n||void 0===n?void 0:n.address,b).XbtcBalance),m=function(){var e=Object(C.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(kn.validate(o,"BTC")){e.next=4;break}return cn.a.warn({message:"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684BTC\u5730\u5740"}),e.abrupt("return");case 4:if(!(c<=0)){e.next=7;break}return cn.a.warn({message:"\u8d4e\u56de\u7684\u503c\u5fc5\u987b\u5927\u4e8e0"}),e.abrupt("return");case 7:return e.next=9,Object(fn.web3FromAddress)(n.address);case 9:t=e.sent,j.tx.xGatewayBitcoinV2.requestRedeem(n.address,1e8*c,o).signAndSend(n.address,{signer:t.signer},(function(n){var e=n.status,t=n.dispatchError;n.events;if(e.isInBlock)cn.a.success({message:"Completed at block hash ".concat(e.asInBlock.toString()),duration:0});else if(t){if(t.isModule){var i=j.registry.findMetaError(t.asModule),c=i.documentation,r=i.name,a=i.section;cn.a.error({message:"".concat(a,".").concat(r,": ").concat(c.join(" ")),duration:0})}}else cn.a.success({message:"Current status: ".concat(e.type),duration:0}),"Finalized"===e.type&&x(b+1)})).catch((function(n){cn.a.error({message:":( transaction failed', ".concat(n),duration:0})}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(gn.jsxs)(vn.d,{children:[Object(gn.jsxs)(vn.b,{children:[Object(gn.jsx)("img",{src:tn,alt:""}),Object(gn.jsx)(rn.a,{value:c,onChange:function(n){return r(n)}}),Object(gn.jsx)("div",{className:"btc-title",children:"BTC"})]}),Object(gn.jsxs)(vn.e,{children:[e("X-BTC balances")," ",f||"0"]}),Object(gn.jsxs)(vn.a,{children:[Object(gn.jsxs)("div",{className:"btc-address-info",children:[Object(gn.jsx)("div",{className:"btc-address-title",children:e("BTC address")}),Object(gn.jsxs)("div",{className:"btc-fee",children:[e("Bitcoin Network Transaction Fees")," 0.0001 BTC"]})]}),Object(gn.jsx)(yn.a,{value:o,onChange:function(n){return d(n.target.value)}})]}),Object(gn.jsx)(an.a,{}),Object(gn.jsxs)(vn.c,{children:[Object(gn.jsx)("div",{className:"redeem-footer-title",children:e("You will receive")}),Object(gn.jsxs)("div",{className:"redeem-footer-num",children:[c," BTC"]}),Object(gn.jsx)(sn.a,{onClick:m,children:e("next")})]})]})},Sn=A.a.div(En||(En=Object(z.a)(["\n  margin-right: 24px;\n  margin-top: 24px;\n"]))),Bn=A.a.div(Fn||(Fn=Object(z.a)(["\n  width: 400px;\n  height: 88px;\n  background: #fff;\n  border: 1px solid #EFEFEF;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  padding: 20px 24px;\n  margin-bottom: 16px;\n  justify-content: space-between;\n  img{\n    width: 16px;\n    height: 16px;\n  }\n  .transaction-confirmation{\n    display: flex;\n    font-size: 16px;\n    .confirmation-num{\n      margin-left: 8px;\n      font-weight: bold;\n    }\n    .confirmation-sum{\n      color: #8E8E8E;\n      font-weight: bold;\n    }\n  }\n  .circle{\n    width: 40px;\n    height: 40px;\n    background: #34C69A;\n    border-radius: 50%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 12px;\n    color: #FFFFFF;\n    font-weight: bold;\n  }\n  .btc-amount{\n    font-size: 16px;\n    color: #282828;\n    font-weight: bold;\n  }\n"]))),zn=A.a.div(Nn||(Nn=Object(z.a)(["\n  width: 400px;\n  height: 88px;\n  background: #fff;\n  border: 1px solid #EFEFEF;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  padding: 20px 24px;\n  margin-bottom: 16px;\n  justify-content: space-between;\n  img{\n    width: 16px;\n    height: 16px;\n  }\n  .remaining-time-title{\n    display: flex;\n    font-size: 16px;\n    .remaining-time{\n      font-weight: bold;\n      margin-left: 8px;\n      color: #EA754B;\n    }\n  }\n  .circle{\n    width: 40px;\n    height: 40px;\n    background: #EA754B;\n    border-radius: 50%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 12px;\n    color: #FFFFFF;\n    font-weight: bold;\n  }\n  .btc-amount{\n    font-size: 16px;\n    color: #282828;\n    font-weight: bold;\n  }\n"]))),An=t.p+"static/media/insert.465562f4.svg",Tn=function(n){var e=n.onClick,t=n.BtcAmout,i=Object(dn.a)().t;return Object(gn.jsx)("li",{onClick:e,children:Object(gn.jsxs)(Bn,{children:[Object(gn.jsx)("div",{className:"circle",children:i("issue")}),Object(gn.jsxs)("div",{className:"btc-amount",children:[(+t.toString(10)/1e8).toFixed(5)," XBTC"]}),Object(gn.jsx)("div",{children:Object(gn.jsx)("img",{src:An,alt:""})})]})})},In=function(n){var e=n.amount,t=n.onClick,i=function(n){var e=Object(un.b)().api,t=Object(B.useState)(28800),i=Object(S.a)(t,2),c=i[0],r=i[1];return Object(B.useEffect)((function(){var t=e.rpc.chain.subscribeNewHeads((function(e){r(Math.max(0,100+n-e.number.toNumber()))}));return function(){t.then()}}),[]),n?c:0}(+n.openTime),c=Object(dn.a)().t;return Object(gn.jsx)("li",{onClick:t,children:Object(gn.jsxs)(zn,{children:[Object(gn.jsx)("div",{className:"circle",children:c("Redeem")}),Object(gn.jsxs)("div",{className:"btc-amount",children:[(+e.toString(10)/1e8).toFixed(5)," BTC"]}),Object(gn.jsxs)("div",{className:"remaining-time-title",children:[c("Remaining time"),Object(gn.jsx)("div",{className:"remaining-time",children:new Date(6*i*1e3).toISOString().substr(11,5)})]}),Object(gn.jsx)("div",{children:Object(gn.jsx)("img",{src:An,alt:""})})]})})},Rn=t.p+"static/media/redWarning.c95c426f.svg",Mn=t.p+"static/media/warning2.ae4965d0.svg";var qn,Jn=t(405),Xn=t(406),Pn=t(758);!function(n){n[n.Issue=0]="Issue",n[n.Redeem=1]="Redeem"}(qn||(qn={}));e.default=function(){var n=Object(B.useContext)(Jn.a),e=Object(B.useContext)(Xn.a),t=Object(ln.a)().currentAccount,i=Object(un.b)(),c=i.api,r=(i.isApiReady,Object(B.useState)([])),a=Object(S.a)(r,2),s=a[0],o=a[1],d=Object(B.useState)([]),l=Object(S.a)(d,2),u=l[0],b=l[1],x=Object(xn.a)(Object(pn.a)(t?t.address:"16aVMBpJEdRe3PW2E3AsWENYhoKUaeTfDT6P6fdUCQtiiHVL"),0);Object(B.useMemo)((function(){var e=JSON.parse(JSON.stringify(n)).requests.filter((function(n){return n.requester===x}));o(e)}),[n]),Object(B.useMemo)((function(){var n=JSON.parse(JSON.stringify(e)).requests.filter((function(n){return n.requester===x}));b(n)}),[e]);var p=Object(B.useState)(!1),j=Object(S.a)(p,2),f=j[0],m=j[1],h=Object(B.useState)(!1),g=Object(S.a)(h,2),O=g[0],v=g[1],y=Object(B.useState)(""),w=Object(S.a)(y,2),k=w[0],E=w[1],F=Object(B.useState)(""),z=Object(S.a)(F,2),A=z[0],L=z[1],W=Object(B.useState)(100),K=Object(S.a)(W,2),Q=K[0],_=K[1],Z=Object(dn.a)().t,$=function(n){var e=Object(B.useState)(n),t=Object(S.a)(e,2),i=t[0],c=t[1];return{activeTab:i,setActiveTab:c,isActive:function(n){return n===i}}}(qn.Issue),nn=$.setActiveTab,en=$.isActive,tn=s.filter((function(n){return n.id===k})),rn=u.filter((function(n){return n.id===A}));function an(){return(an=Object(C.a)(N.a.mark((function n(){var e;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(fn.web3FromAddress)(t.address);case 2:e=n.sent,c.tx.xGatewayBitcoinV2.cancelRedeem(A,!1).signAndSend(t.address,{signer:e.signer},(function(n){var e=n.status,t=n.dispatchError;n.events;if(e.isInBlock)cn.a.success({message:"Completed at block hash ".concat(e.asInBlock.toString()),duration:0});else if(t){if(t.isModule){var i=c.registry.findMetaError(t.asModule),r=i.documentation,a=i.name,s=i.section;cn.a.error({message:"".concat(s,".").concat(a,": ").concat(r.join(" ")),duration:0})}}else cn.a.success({message:"Current status: ".concat(e.type),duration:0}),"Finalized"===e.type&&v(!1)})).catch((function(n){cn.a.error({message:":( transaction failed', ".concat(n),duration:0})}));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function bn(){return(bn=Object(C.a)(N.a.mark((function n(){var e;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(fn.web3FromAddress)(t.address);case 2:e=n.sent,c.tx.xGatewayBitcoinV2.cancelRedeem(A,!0).signAndSend(t.address,{signer:e.signer},(function(n){var e=n.status,t=n.dispatchError;n.events;if(e.isInBlock)cn.a.success({message:"Completed at block hash ".concat(e.asInBlock.toString()),duration:0});else if(t){if(t.isModule){var i=c.registry.findMetaError(t.asModule),r=i.documentation,a=i.name,s=i.section;cn.a.error({message:"".concat(s,".").concat(a,": ").concat(r.join(" ")),duration:0})}}else cn.a.success({message:"Current status: ".concat(e.type),duration:0}),"Finalized"===e.type&&v(!1)})).catch((function(n){cn.a.error({message:":( transaction failed', ".concat(n),duration:0})}));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(B.useEffect)((function(){if(rn[0]){var n=c.rpc.chain.subscribeNewHeads((function(n){_(Math.max(0,100-n.number.toNumber()+ +rn[0].openTime))}));return function(){n.then()}}}),[A]),Object(gn.jsxs)(T,{children:[Object(gn.jsxs)(I,{children:[Object(gn.jsx)(R,{children:Object(gn.jsxs)("ul",{children:[Object(gn.jsx)("li",{onClick:function(){nn(qn.Issue)},className:en(qn.Issue)?"active":"",children:Z("issue")}),Object(gn.jsx)("li",{onClick:function(){nn(qn.Redeem)},className:en(qn.Redeem)?"active":"",children:Z("Redeem")})]})}),en(qn.Issue)?Object(gn.jsx)(On,{}):Object(gn.jsx)(Cn,{})]}),Object(gn.jsx)(Sn,{children:Object(gn.jsxs)("ul",{children:[s.map((function(n){return Object(gn.jsx)(Tn,{BtcAmout:n.btcAmount,onClick:function(){m(!0),E(n.id)}},n.id)})),u.map((function(n){return Object(gn.jsx)(In,{amount:n.amount,openTime:n.openTime,onClick:function(){v(!0),L(n.id)}},n.id)}))]})}),Object(gn.jsx)(M,{children:Object(gn.jsxs)(on.a,{visible:f,onCancel:function(){return m(!1)},footer:null,getContainer:!1,title:"\u8bf7\u5c3d\u5feb\u5b8c\u6210\u8f6c\u8d26",children:[Object(gn.jsxs)(q,{children:[Object(gn.jsx)("img",{src:Rn,alt:""}),Object(gn.jsx)("div",{children:"\u82e5\u672a\u57283\u5929\u5185\u5b8c\u6210\uff0c\u60a8\u5c06\u5931\u53bb\u9501\u5b9a\u7684\u62b5\u62bc\u54c1"})]}),Object(gn.jsxs)(J,{children:[Object(gn.jsx)("div",{className:"info-title",children:"\u8f6c\u8d26\u91d1\u989d"}),Object(gn.jsxs)("div",{className:"transfer-amount",children:[tn.length>0?(+tn[0].btcAmount.toString(10)/1e8).toFixed(5):0," ","BTC"]}),Object(gn.jsxs)("div",{className:"transfer-tip",children:[Object(gn.jsx)("img",{src:Mn,alt:""}),Object(gn.jsx)("div",{children:"\u8bf7\u5728\u5355\u7b14\u4ea4\u6613\u4e2d\u8f6c\u8d26,\u5426\u5219\u4f1a\u9020\u6210\u8d44\u4ea7\u635f\u5931"})]})]}),Object(gn.jsxs)(X,{children:[Object(gn.jsx)("div",{className:"title",children:"\u8d44\u4ea7\u4fdd\u9669\u5e93\u7684\u6bd4\u7279\u5e01\u5730\u5740"}),Object(gn.jsx)("div",{className:"address",children:tn.length>0?tn[0].btcAddress:""})]}),Object(gn.jsxs)(P,{children:[Object(gn.jsx)("div",{className:"title",children:"OP_RETURN"}),Object(gn.jsx)("div",{className:"address",children:Object(Pn.a)(tn.length>0?tn[0].btcAddress:"").substring(2,99)})]}),Object(gn.jsx)(V,{children:Object(gn.jsxs)("ul",{children:[Object(gn.jsxs)("li",{children:[Object(gn.jsx)("div",{className:"title",children:"\u53d1\u9001\u8bf7\u6c42\u6807\u8bc6"}),Object(gn.jsx)("div",{className:"content",children:tn.length>0?+tn[0].id.toString(10):""})]}),Object(gn.jsxs)("li",{children:[Object(gn.jsx)("div",{className:"title",children:"\u53d1\u884c\u6570\u91cf"}),Object(gn.jsxs)("div",{className:"content",children:[tn.length>0?(parseInt(tn[0].btcAmount)/1e8).toFixed(5):0," ","XBTC"]})]})]})})]})}),Object(gn.jsx)(U,{children:Object(gn.jsxs)(on.a,{visible:O,onCancel:function(){return v(!1)},footer:null,getContainer:!1,title:Z("Redeem"),children:[Object(gn.jsxs)(D,{children:[Object(gn.jsx)("img",{src:Rn,alt:""}),Object(gn.jsx)("div",{children:Z("If you do not receive the redeemed BTC within 48 hours, you can make a redemption request again after the cancellation of redemption or forced redemption. If you choose forced redemption, you will receive the equivalent PCX immediately")})]}),Object(gn.jsxs)(G,{children:[Object(gn.jsx)("div",{className:"title",children:Z("Remaining time")}),Object(gn.jsx)("div",{className:"time",children:new Date(6*Q*1e3).toISOString().substr(11,5)})]}),Object(gn.jsxs)(H,{children:[Object(gn.jsx)(sn.a,{disabled:0!==Q,onClick:function(){return an.apply(this,arguments)},children:Z("Cancel redemption")}),Object(gn.jsx)("div",{onClick:function(){return bn.apply(this,arguments)},className:"force-redeem",children:Z("Forcible redemption")})]}),Object(gn.jsx)(Y,{children:Object(gn.jsxs)("ul",{children:[Object(gn.jsxs)("li",{children:[Object(gn.jsx)("div",{className:"title",children:Z("Request ID")}),Object(gn.jsx)("div",{className:"content",children:rn.length>0?+rn[0].id.toString(10):""})]}),Object(gn.jsxs)("li",{children:[Object(gn.jsx)("div",{className:"title",children:Z("Amount")}),Object(gn.jsxs)("div",{className:"content",children:[" ",rn.length>0?(+rn[0].amount.toString(10)/1e8).toFixed(5):0," ","XBTC"]})]})]})})]})})]})}}}]);
//# sourceMappingURL=7.dd877245.chunk.js.map